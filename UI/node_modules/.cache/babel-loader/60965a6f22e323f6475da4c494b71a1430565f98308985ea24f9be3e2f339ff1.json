{"ast":null,"code":"// API configuration\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n/**\r\n * Generic API request function\r\n */\nasync function apiRequest(endpoint, options = {}) {\n  const url = `${API_BASE_URL}${endpoint}`;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers\n    },\n    ...options\n  };\n  try {\n    const response = await fetch(url, config);\n\n    // Check if response is JSON\n    const contentType = response.headers.get(\"content-type\");\n    if (!contentType || !contentType.includes(\"application/json\")) {\n      throw new Error(`Expected JSON response, got ${contentType}`);\n    }\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || `HTTP error! status: ${response.status}`);\n    }\n    return data;\n  } catch (error) {\n    // More detailed error logging\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\n      console.error('Network error - Is the backend server running?', error);\n      throw new Error('Cannot connect to server. Please make sure the backend is running on http://localhost:5000');\n    }\n    console.error('API request failed:', error);\n    throw error;\n  }\n}\n\n// API functions for destinations\nexport const destinationsAPI = {\n  // Get all destinations\n  getAll: () => apiRequest('/destinations'),\n  // Get a single destination by ID\n  getById: id => apiRequest(`/destinations/${id}`)\n};\n\n// API functions for attractions\nexport const attractionsAPI = {\n  // Get all attractions\n  getAll: () => apiRequest('/attractions'),\n  // Search attractions by location\n  search: location => apiRequest(`/attractions/search?location=${encodeURIComponent(location)}`)\n};\n\n// Health check\nexport const healthCheck = () => apiRequest('/health');\n\n// API functions for authentication\nexport const authAPI = {\n  // Sign up a new user\n  signup: userData => apiRequest('/auth/signup', {\n    method: 'POST',\n    body: JSON.stringify(userData)\n  }),\n  // Login user\n  login: credentials => apiRequest('/auth/login', {\n    method: 'POST',\n    body: JSON.stringify(credentials)\n  }),\n  // Get user by ID\n  getUser: userId => apiRequest(`/auth/user/${userId}`)\n};\nexport default {\n  destinationsAPI,\n  attractionsAPI,\n  authAPI,\n  healthCheck\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","apiRequest","endpoint","options","url","config","headers","response","fetch","contentType","get","includes","Error","data","json","ok","error","status","name","message","console","destinationsAPI","getAll","getById","id","attractionsAPI","search","location","encodeURIComponent","healthCheck","authAPI","signup","userData","method","body","JSON","stringify","login","credentials","getUser","userId"],"sources":["C:/Users/VO MINH KHANG/project/helloworld/culture_compass/Project-Smart-Tourism-System/UI/src/utils/api.js"],"sourcesContent":["// API configuration\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n/**\r\n * Generic API request function\r\n */\r\nasync function apiRequest(endpoint, options = {}) {\r\n  const url = `${API_BASE_URL}${endpoint}`;\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,\r\n    },\r\n    ...options,\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(url, config);\r\n    \r\n    // Check if response is JSON\r\n    const contentType = response.headers.get(\"content-type\");\r\n    if (!contentType || !contentType.includes(\"application/json\")) {\r\n      throw new Error(`Expected JSON response, got ${contentType}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(data.error || `HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    return data;\r\n  } catch (error) {\r\n    // More detailed error logging\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      console.error('Network error - Is the backend server running?', error);\r\n      throw new Error('Cannot connect to server. Please make sure the backend is running on http://localhost:5000');\r\n    }\r\n    console.error('API request failed:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// API functions for destinations\r\nexport const destinationsAPI = {\r\n  // Get all destinations\r\n  getAll: () => apiRequest('/destinations'),\r\n  \r\n  // Get a single destination by ID\r\n  getById: (id) => apiRequest(`/destinations/${id}`),\r\n};\r\n\r\n// API functions for attractions\r\nexport const attractionsAPI = {\r\n  // Get all attractions\r\n  getAll: () => apiRequest('/attractions'),\r\n  \r\n  // Search attractions by location\r\n  search: (location) => apiRequest(`/attractions/search?location=${encodeURIComponent(location)}`),\r\n};\r\n\r\n// Health check\r\nexport const healthCheck = () => apiRequest('/health');\r\n\r\n// API functions for authentication\r\nexport const authAPI = {\r\n  // Sign up a new user\r\n  signup: (userData) => apiRequest('/auth/signup', {\r\n    method: 'POST',\r\n    body: JSON.stringify(userData),\r\n  }),\r\n  \r\n  // Login user\r\n  login: (credentials) => apiRequest('/auth/login', {\r\n    method: 'POST',\r\n    body: JSON.stringify(credentials),\r\n  }),\r\n  \r\n  // Get user by ID\r\n  getUser: (userId) => apiRequest(`/auth/user/${userId}`),\r\n};\r\n\r\nexport default {\r\n  destinationsAPI,\r\n  attractionsAPI,\r\n  authAPI,\r\n  healthCheck,\r\n};\r\n\r\n"],"mappings":"AAAA;AACA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;;AAEjF;AACA;AACA;AACA,eAAeC,UAAUA,CAACC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EAChD,MAAMC,GAAG,GAAG,GAAGP,YAAY,GAAGK,QAAQ,EAAE;EACxC,MAAMG,MAAM,GAAG;IACbC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,GAAGH,OAAO,CAACG;IACb,CAAC;IACD,GAAGH;EACL,CAAC;EAED,IAAI;IACF,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACJ,GAAG,EAAEC,MAAM,CAAC;;IAEzC;IACA,MAAMI,WAAW,GAAGF,QAAQ,CAACD,OAAO,CAACI,GAAG,CAAC,cAAc,CAAC;IACxD,IAAI,CAACD,WAAW,IAAI,CAACA,WAAW,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE;MAC7D,MAAM,IAAIC,KAAK,CAAC,+BAA+BH,WAAW,EAAE,CAAC;IAC/D;IAEA,MAAMI,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;IAElC,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;MAChB,MAAM,IAAIH,KAAK,CAACC,IAAI,CAACG,KAAK,IAAI,uBAAuBT,QAAQ,CAACU,MAAM,EAAE,CAAC;IACzE;IAEA,OAAOJ,IAAI;EACb,CAAC,CAAC,OAAOG,KAAK,EAAE;IACd;IACA,IAAIA,KAAK,CAACE,IAAI,KAAK,WAAW,IAAIF,KAAK,CAACG,OAAO,CAACR,QAAQ,CAAC,OAAO,CAAC,EAAE;MACjES,OAAO,CAACJ,KAAK,CAAC,gDAAgD,EAAEA,KAAK,CAAC;MACtE,MAAM,IAAIJ,KAAK,CAAC,4FAA4F,CAAC;IAC/G;IACAQ,OAAO,CAACJ,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC3C,MAAMA,KAAK;EACb;AACF;;AAEA;AACA,OAAO,MAAMK,eAAe,GAAG;EAC7B;EACAC,MAAM,EAAEA,CAAA,KAAMrB,UAAU,CAAC,eAAe,CAAC;EAEzC;EACAsB,OAAO,EAAGC,EAAE,IAAKvB,UAAU,CAAC,iBAAiBuB,EAAE,EAAE;AACnD,CAAC;;AAED;AACA,OAAO,MAAMC,cAAc,GAAG;EAC5B;EACAH,MAAM,EAAEA,CAAA,KAAMrB,UAAU,CAAC,cAAc,CAAC;EAExC;EACAyB,MAAM,EAAGC,QAAQ,IAAK1B,UAAU,CAAC,gCAAgC2B,kBAAkB,CAACD,QAAQ,CAAC,EAAE;AACjG,CAAC;;AAED;AACA,OAAO,MAAME,WAAW,GAAGA,CAAA,KAAM5B,UAAU,CAAC,SAAS,CAAC;;AAEtD;AACA,OAAO,MAAM6B,OAAO,GAAG;EACrB;EACAC,MAAM,EAAGC,QAAQ,IAAK/B,UAAU,CAAC,cAAc,EAAE;IAC/CgC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,QAAQ;EAC/B,CAAC,CAAC;EAEF;EACAK,KAAK,EAAGC,WAAW,IAAKrC,UAAU,CAAC,aAAa,EAAE;IAChDgC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACE,WAAW;EAClC,CAAC,CAAC;EAEF;EACAC,OAAO,EAAGC,MAAM,IAAKvC,UAAU,CAAC,cAAcuC,MAAM,EAAE;AACxD,CAAC;AAED,eAAe;EACbnB,eAAe;EACfI,cAAc;EACdK,OAAO;EACPD;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}