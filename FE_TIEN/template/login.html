<!--HTML-->

<!-- LOGIN POPUP -->
    <div id="login-overlay" class="login-overlay"></div>

    <div id="login-popup" class="login-popup">
        <h2 class="login-title">ĐĂNG NHẬP</h2>

        <input type="text" class="login-input" placeholder="Tên đăng nhập">
        <input type="password" class="login-input" placeholder="Mật khẩu">

        <button class="login-btn-submit">Đăng nhập</button>

        <div class="oauth google">
            <img src="../static/images/google.png">
            <span>Google</span>
        </div>

        <div class="oauth facebook">
            <img src="../static/images/facebook.png">
            <span>Facebook</span>
        </div>

        <p class="login-small">
            Chưa có tài khoản? <a class="login-link" href="#">Tạo tài khoản mới</a>
        </p>

        <div class="login-footer-links">
            <a class="login-link" href="#">Quên mật khẩu?</a>
            <a class="login-link guest-continue" href="#">Tiếp tục với tư cách khách</a>
        </div>
    </div>

    <!-- SIGN UP --> 
    <!-- step 1-->
    <div id="signup-overlay" class="login-overlay"></div>

    <div id="signup-popup" class="login-popup">
        <h2 class="login-title">Hãy cùng bắt đầu nào!</h2>

        <input type="text" class="login-input" placeholder="Nhập số điện thoại hoặc email">

        <button class="login-btn-submit">Tiếp tục</button>

        <p class="login-small">
            <a class="login-link back-to-login" href="#">← Quay lại trang đăng nhập</a>      
        </p>

        <p class="login-small" style="margin-top: 10px; color: #333;">
            Nhiều tính năng hơn đang đợi bạn. Hãy đăng nhập để được mở khóa.
        </p>

        <p class="login-small">
            <a class="login-link guest-continue" href="#">Tiếp tục với tư cách là khách</a>
        </p>
    </div>

    <!-- step 2-->
    <div id="signup2-overlay" class="login-overlay"></div>

    <div id="signup2-popup" class="login-popup">
        <h2 class="login-title">Hãy cùng bắt đầu nào!</h2>

        <input type="text" class="login-input" placeholder="Tên đăng nhập">
        <input type="password" class="login-input" placeholder="Mật khẩu (ít nhất 8 ký tự)">
        <input type="password" class="login-input" placeholder="Xác nhận mật khẩu">

        <button class="login-btn-submit">Tạo tài khoản</button>

        <p class="login-small">
            <a class="login-link back-to-signup1" href="#">← Quay lại trang đăng nhập</a>
        </p>

        <p class="login-small" style="margin-top: 10px; color: #333">
            Nhiều tính năng hơn đang đợi bạn. Hãy đăng nhập để được mở khóa
        </p>

        <p class="login-small">
            <a class="login-link guest-continue" href="#">Tiếp tục với tư cách là khách</a>
        </p>
    </div>

    <!--FORGOT PASSWORD-->
    <div id="forgot-overlay" class="login-overlay"></div>

    <div id="forgot-popup" class="login-popup">
        <h2 class="login-title">QUÊN MẬT KHẨU</h2>

        <p class="login-small" style="text-align:center; font-size:17px; color:#000; font-weight: 600; margin-bottom: 18px;">
            Nhập email hoặc số điện thoại để xác thực
        </p>

        <input type="text" class="login-input" placeholder="Example@gmail.com / 09 1234 5678">
        <button class="login-btn-submit">Gửi</button>

        <p class="login-small" style="margin-top: 14px;">
            <a class="login-link back-to-login-from-forgot" href="#">← Quay lại trang đăng nhập</a>
        </p>
    </div>

    <!-- FORGOT PASSWORD STEP 2 -->
    <div id="forgot2-overlay" class="login-overlay"></div>

    <div id="forgot2-popup" class="login-popup">
        <h2 class="login-title">XÁC THỰC</h2>

        <p class="login-small" style="text-align:center; font-size:18px; font-weight:600; color:#000; margin-bottom:20px;">
            Nhập mã xác thực
        </p>

        <div class="otp-container" style="display:flex; justify-content:center; gap:16px; margin-bottom:20px;">
            <input maxlength="1" class="otp-input" type="text">
            <input maxlength="1" class="otp-input" type="text">
            <input maxlength="1" class="otp-input" type="text">
            <input maxlength="1" class="otp-input" type="text">
        </div>

        <p class="login-small" style="text-align:center; margin-bottom: 18px;">
            Bạn không nhận được mã? <a href="#" class="login-link resend-otp">Gửi lại</a>
        </p>

        <button class="login-btn-submit">Xác thực</button>

        <p class="login-small" style="margin-top: 14px;">
            <a class="login-link back-to-forgot1" href="#">← Quay lại</a>
        </p>
    </div>

    <!--JAVA SCRIPT-->
    <!--LOGIN-->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const loginBtns = document.querySelectorAll(".login-btn");
            const popup = document.getElementById("login-popup");
            const overlay = document.getElementById("login-overlay");

            if (!popup || !overlay || loginBtns.length === 0) return;

            loginBtns.forEach(btn => {
                btn.addEventListener("click", (e) => {
                    e.preventDefault();
                    popup.classList.add("active");
                    overlay.style.display = "block";
                    popup.style.display = "block";
                });
            });

            overlay.addEventListener("click", () => {
                popup.classList.remove("active");
                overlay.style.display = "none";
                setTimeout(() => {
                    popup.style.display = "none";
                }, 200);
            });

            const forgotLink = document.querySelector("#login-popup .login-footer-links .login-link");
            const forgotPopup = document.getElementById("forgot-popup");
            const forgotOverlay = document.getElementById("forgot-overlay");

            forgotLink.addEventListener("click", function(e) {
                e.preventDefault();

                popup.classList.remove("active");
                overlay.style.display = "none";
                popup.style.display = "none";

                forgotPopup.classList.add("active");
                forgotOverlay.style.display = "block";
                forgotPopup.style.display = "block";
            });

            const backToLoginFromForgot = document.querySelector(".back-to-login-from-forgot");

            backToLoginFromForgot.addEventListener("click", function(e) {
                e.preventDefault();

                forgotPopup.classList.remove("active");
                forgotOverlay.style.display = "none";
                forgotPopup.style.display = "none";

                popup.classList.add("active");
                overlay.style.display = "block";
                popup.style.display = "block";
            });

            forgotOverlay.addEventListener("click", function() {
                forgotPopup.classList.remove("active");
                forgotOverlay.style.display = "none";
                forgot.style.display = "none";
            });

            const forgot2Popup = document.getElementById("forgot2-popup");
            const forgot2Overlay = document.getElementById("forgot2-overlay");

            const otpInputs = document.querySelectorAll(".otp-input");

            // ==== STEP 1 → STEP 2 ====
            const forgotSendBtn = document.querySelector("#forgot-popup .login-btn-submit");

            forgotSendBtn.addEventListener("click", function(e) {
                e.preventDefault();

                // Ẩn step 1
                forgotPopup.classList.remove("active");
                forgotOverlay.style.display = "none";
                forgotPopup.style.display = "none";

               // Hiện step 2
                forgot2Popup.classList.add("active");
                forgot2Overlay.style.display = "block";
                forgot2Popup.style.display = "block";

                // Focus ô đầu tiên
                otpInputs[0].focus();
            });

            // ==== Tự động chuyển ô khi nhập số ====
            otpInputs.forEach((box, index) => {
                box.addEventListener("input", () => {
                    if (box.value.length === 1) {
                        if (index < otpInputs.length - 1) otpInputs[index + 1].focus();
                    }
                });
            });

            // ==== Overlay để đóng step 2 ====
            forgot2Overlay.addEventListener("click", () => {
                forgot2Popup.classList.remove("active");
                forgot2Overlay.style.display = "none";
                forgot2Popup.style.display = "none";
            });

            // ==== Step 2 → quay lại Step 1 ====
            const backToForgot1 = document.querySelector(".back-to-forgot1");

            backToForgot1.addEventListener("click", function(e) {
                e.preventDefault();

                forgot2Popup.classList.remove("active");
                forgot2Overlay.style.display = "none";

                forgotPopup.classList.add("active");
                forgotOverlay.style.display = "block";
                forgotPopup.style.display = "block";
            });
        });
    </script>

    <!--SIGNUP STEP 1-->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loginPopup = document.getElementById("login-popup");
            const loginOverlay = document.getElementById("login-overlay");

            const signupPopup = document.getElementById("signup-popup");
            const signupOverlay = document.getElementById("signup-overlay")

            const openSignupLinks = document.querySelectorAll(".signup-btn, .login-popup .login-link");
            const backToLogin = document.querySelector(".back-to-login");

            openSignupLinks.forEach(link => {
                link.addEventListener("click", (e) => {
                    if(link.classList.contains("login-link")) {
                        if(!link.textContent.includes("Tạo tài khoản")) return;
                    }

                    e.preventDefault();
                    loginPopup.style.display = "none";
                    loginOverlay.style.display = "none";

                    signupPopup.classList.add("active");
                    signupOverlay.style.display = "block";
                    signupPopup.style.display = "block";
                });
            });

            backToLogin.addEventListener("click", (e) => {
                e.preventDefault();

                signupPopup.classList.remove("active");
                signupOverlay.style.display = "none";

                loginPopup.classList.add("active");
                loginOverlay.style.display = "block";
                loginPopup.style.display = "block";
            });

            signupOverlay.addEventListener("click", () => {
                signupPopup.classList.remove("active");
                signupOverlay.style.display = "none";
                signupPopup.style.display = "none";
            });

        });
    </script>

    <!--SIGNUP-STEP 2-->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loginPopup = document.getElementById("login-popup");
            const loginOverlay = document.getElementById("login-overlay");

            const signupPopup = document.getElementById("signup-popup");
            const signupOverlay = document.getElementById("signup-overlay");

            const signupNextBtn = document.querySelector("#signup-popup .login-btn-submit");
            const signup2Popup = document.getElementById("signup2-popup");
            const signup2Overlay = document.getElementById("signup2-overlay");

            signupNextBtn.addEventListener("click", (e) => {
                e.preventDefault();

                signupPopup.classList.remove("active");
                signupOverlay.style.display = "none";
                signupPopup.style.display = "none";

                signup2Popup.classList.add("active");
                signup2Overlay.style.display = "block";
                signup2Popup.style.display = "block";
            });

            signup2Overlay.addEventListener("click", () => {
                signup2Popup.classList.remove("active");
                signup2Overlay.style.display = "none";
                signup2Popup.style.display = "none";
            });

            const backToSignup1 = document.querySelector(".back-to-signup1");

            backToSignup1.addEventListener("click", (e) => {
                e.preventDefault();

                signup2Popup.classList.remove("active");
                signup2Overlay.style.display = "none";

                loginPopup.classList.add("active");
                loginOverlay.style.display = "block";
                loginPopup.style.display = "block";
            });
        });
    </script>